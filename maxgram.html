<!DOCTYPE html>
<html lang="fr">
<head><meta charset="utf-8"><title>Robot Launcher - MaxGram</title></head>
<body style="font-family:Arial,Helvetica,sans-serif;max-width:800px;margin:30px auto;">
  <h2>Robot Launcher — MaxGram</h2>

  <label>Texte à poster</label><br>
  <textarea id="text" rows="4" style="width:100%">Bonjour depuis le robot !</textarea><br><br>

  <label>Image (URL) — facultatif</label><br>
  <input id="image" style="width:100%" placeholder="https://.../photo.jpg"><br><br>

  <label>Mode</label><br>
  <select id="mode">
    <option value="open">Ouvrir dans un nouvel onglet (manuel)</option>
    <option value="silent">Ouvrir en background (target _self)</option>
  </select><br><br>

  <button id="go">Ouvrir la page de publication</button>

  <div id="log" style="margin-top:18px;color:#333;font-family:monospace;"></div>

<script>
const base = "https://maxgram.wapaxo.com/index";
const p = "64932261";
const u = "MaxChat";

function log(msg){ document.getElementById('log').innerHTML += msg + "<br>"; }

document.getElementById('go').addEventListener('click', () => {
  const text = encodeURIComponent(document.getElementById('text').value || "");
  const image = encodeURIComponent(document.getElementById('image').value || "");
  const url = `${base}?p=${p}&u=${u}&text=${text}${image ? '&image='+image : ''}`;

  log("URL construite : " + url);
  const mode = document.getElementById('mode').value;
  if(mode === 'open'){
    window.open(url, "_blank");
    log("Nouvel onglet ouvert.");
  } else {
    window.location.href = url;
    log("Redirection en cours...");
  }
});
</script>
</body>
</html>