<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Robot MaxGram Auto</title>
<style>
body{font-family:Arial,sans-serif;max-width:900px;margin:20px auto;padding:10px;}
#status{color:green;font-weight:bold;margin-bottom:10px;}
#errors{color:red;font-weight:bold;margin-bottom:10px;}
button{padding:8px 12px;margin-top:5px;}
</style>
</head>
<body>

<h1>Robot MaxGram Auto</h1>
<div id="status">Initialisation...</div>
<div id="errors"></div>

<script>
function log(msg){ document.getElementById("status").textContent = msg; console.log(msg); }
function error(msg){ document.getElementById("errors").textContent = msg; console.error(msg); }
function sleep(ms){ return new Promise(res => setTimeout(res, ms)); }

// === LISTE DES POSTS ===
const posts = [
  {text:"Post auto 1 üöÄ", image:""},
  {text:"Post auto 2 üñºÔ∏è", image:"https://via.placeholder.com/300"},
  {text:"Post auto 3 üéØ", image:""}
];
const delay = 3000;

// === FONCTION PRINCIPALE ===
async function runRobot() {
  const directLink = "https://maxgram.wapaxo.com/?p=64932261&u=maximin";
  log("Ouverture du lien MaxGram...");
  
  // 1Ô∏è‚É£ Aller sur le lien direct
  window.location.href = directLink;

  // ‚ö†Ô∏è Le script sera perdu si navigue vers un autre domaine
  // Donc pour que √ßa fonctionne, ce script doit √™tre inject√© ou ex√©cut√© sur maxgram.wapaxo.com
  
  // --- Exemple d‚Äôautomatisation √† mettre sur maxgram.wapaxo.com ---
  /*
  window.addEventListener('load', async () => {
    // V√©rifier si l‚Äôutilisateur est connect√© / profil valide
    const profileExists = document.querySelector(".user-header, #profile-identifier");
    if(!profileExists){
      error("‚ùå Profil introuvable ou non connect√© !");
      return;
    }

    log("Utilisateur connect√©, redirection vers la page d'accueil...");
    // Rediriger vers la page d‚Äôaccueil
    window.location.href = "https://maxgram.wapaxo.com/index.html";
    await sleep(2000);

    // Cliquer sur le bouton ‚ÄúCr√©er un post‚Äù
    const createBtn = document.querySelector('a[href="/page-creat-post.html"]');
    if(createBtn){
      log("Cr√©ation d‚Äôun nouveau post...");
      createBtn.click();
    } else {
      error("‚ùå Bouton pour cr√©er un post introuvable !");
      return;
    }

    // Une fois sur la page de cr√©ation, remplir et publier les posts
    await sleep(2000);
    const textarea = document.querySelector('textarea[name="text"]');
    const imgInput = document.querySelector('input[name="var-img"]');
    const postBtn = document.querySelector('button[name="blog_submit"]');
    if(!textarea || !postBtn){
      error("‚ùå Formulaire introuvable !");
      return;
    }

    for(let i=0;i<posts.length;i++){
      const p = posts[i];
      log(`Publication ${i+1}/${posts.length}: ${p.text}`);
      textarea.value = p.text;
      if(imgInput) imgInput.value = p.image || "";
      postBtn.click();
      await sleep(delay);
    }

    log("‚úÖ Tous les posts ont √©t√© publi√©s !");
  });
  */
}

// === LANCEMENT AUTOMATIQUE ===
window.addEventListener('load', runRobot);
</script>

</body>
</html>