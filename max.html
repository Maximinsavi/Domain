<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gemini Multimodal Chat</title>
    <style>
      /* === Reset général === */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: system-ui, Arial, sans-serif;
        background: #f2f5f9;
        color: #222;
        padding: 10px;
      }

      /* === Layout === */
      .layout {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        max-width: 900px;
        margin: 0 auto;
      }

      .conversation-panel,
      .composer-panel {
        background: #fff;
        border-radius: 10px;
        padding: 1rem;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
      }

      /* === Header === */
      .panel-header {
        margin-bottom: 1rem;
      }

      .panel-header h1 {
        font-size: 1.4rem;
        margin-bottom: 0.3rem;
        color: #0078ff;
      }

      .panel-header p {
        font-size: 0.95rem;
        color: #555;
      }

      .header-meta {
        margin-top: 0.5rem;
      }

      .badge {
        display: inline-block;
        background: #0078ff;
        color: white;
        border-radius: 6px;
        padding: 2px 8px;
        font-size: 0.75rem;
        margin-right: 5px;
      }

      /* === Conversation box === */
      .conversation {
        background: #f7f9fb;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 10px;
        min-height: 200px;
        max-height: 400px;
        overflow-y: auto;
      }

      /* === Formulaire === */
      form.composer {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .field-group {
        display: flex;
        flex-direction: column;
        gap: 0.3rem;
      }

      label {
        font-weight: 600;
        font-size: 0.9rem;
      }

      input,
      textarea {
        border: 1px solid #ccc;
        border-radius: 6px;
        padding: 8px;
        font-size: 1rem;
        width: 100%;
        background: #fff;
      }

      textarea {
        resize: vertical;
        min-height: 80px;
      }

      /* === Grille image === */
      .field-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .file-drop {
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px dashed #aaa;
        border-radius: 6px;
        padding: 10px;
        cursor: pointer;
        text-align: center;
        color: #777;
        font-size: 0.9rem;
      }

      .file-drop input {
        display: none;
      }

      /* === Preview === */
      .preview-card {
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 10px;
        background: #f9f9f9;
      }

      .preview-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .link-button {
        background: none;
        border: none;
        color: #0078ff;
        cursor: pointer;
        text-decoration: underline;
        font-size: 0.9rem;
      }

      .preview-card img {
        width: 100%;
        height: auto;
        margin-top: 8px;
        border-radius: 6px;
      }

      /* === Boutons === */
      .actions {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      button {
        border: none;
        border-radius: 6px;
        padding: 10px;
        font-size: 1rem;
        cursor: pointer;
        transition: opacity 0.2s;
      }

      .primary {
        background: #0078ff;
        color: #fff;
      }

      .secondary {
        background: #ddd;
        color: #333;
      }

      button:active {
        opacity: 0.8;
      }

      /* === Responsive desktop === */
      @media (min-width: 768px) {
        .layout {
          flex-direction: row;
          align-items: flex-start;
        }

        .conversation-panel {
          flex: 2;
        }

        .composer-panel {
          flex: 1;
        }

        .field-grid {
          grid-template-columns: 1fr 1fr;
        }

        .actions {
          flex-direction: row;
          justify-content: flex-end;
        }

        .actions button {
          width: auto;
          padding: 10px 20px;
        }
      }
    </style>
  </head>
  <body>
    <main class="layout">
      <section class="conversation-panel">
        <header class="panel-header">
          <div>
            <h1>Gemini Multimodal Studio</h1>
            <p>
              Chat with Gemini, keep per-user history, and explore multimodal prompts.
            </p>
          </div>
          <div class="header-meta">
            <span class="badge">Realtime preview</span>
            <span class="badge">Images supported</span>
          </div>
        </header>
        <div id="conversation" class="conversation" aria-live="polite"></div>
      </section>

      <section class="composer-panel">
        <form id="chat-form" class="composer" autocomplete="off">
          <div class="field-group">
            <label for="uid">User ID</label>
            <input
              id="uid"
              name="uid"
              type="text"
              placeholder="e.g. syntaxt0x1c"
              required
            />
          </div>

          <div class="field-group">
            <label for="ask">Message</label>
            <textarea
              id="ask"
              name="ask"
              rows="4"
              placeholder="Ask Gemini something or type 'clear' to reset history"
            ></textarea>
          </div>

          <div class="field-grid">
            <div class="field-group">
              <label for="image-url">Image URL</label>
              <input
                id="image-url"
                name="image_url"
                type="url"
                placeholder="https://example.com/image.jpg"
              />
            </div>
            <div class="field-group">
              <label for="image-file">Upload Image</label>
              <label class="file-drop" id="file-drop">
                <input
                  id="image-file"
                  name="image_file"
                  type="file"
                  accept="image/*"
                />
                <span class="file-drop-label">Drag or click to upload</span>
              </label>
            </div>
          </div>

          <div class="preview-card" id="image-preview" hidden>
            <div class="preview-header">
              <strong>Attached image</strong>
              <button type="button" id="clear-preview" class="link-button">Remove</button>
            </div>
            <img id="preview-image" alt="Selected preview" />
            <small id="preview-meta" class="preview-meta"></small>
          </div>

          <div class="actions">
            <button type="submit" class="primary">Send to Gemini</button>
            <button type="button" id="clear-form" class="secondary">Reset</button>
          </div>
        </form>
      </section>
    </main>

    <script src="/app.js" type="module"></script>
  </body>
</html>