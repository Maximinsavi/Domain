<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gemini Multimodal Chat</title>
    <style>
      /* === Reset général === */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: Arial, sans-serif;
        background: #f2f5f9;
        color: #111;
        padding: 8px;
      }

      /* === Structure générale === */
      .layout {
        display: block;
        width: 100%;
        max-width: 100%;
      }

      .conversation-panel,
      .composer-panel {
        background: #fff;
        border: 1px solid #ccc;
        border-radius: 6px;
        padding: 10px;
        margin-bottom: 10px;
      }

      /* === En-tête === */
      .panel-header h1 {
        font-size: 18px;
        color: #0078ff;
        margin-bottom: 4px;
      }

      .panel-header p {
        font-size: 13px;
        color: #444;
      }

      .badge {
        display: inline-block;
        background: #0078ff;
        color: #fff;
        border-radius: 3px;
        padding: 2px 5px;
        font-size: 11px;
        margin-top: 5px;
        margin-right: 4px;
      }

      /* === Zone de conversation === */
      .conversation {
        background: #f9fafc;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 6px;
        min-height: 180px;
        max-height: 250px;
        overflow: auto;
        font-size: 14px;
      }

      /* === Champs du formulaire === */
      form.composer {
        display: block;
      }

      .field-group {
        margin-bottom: 10px;
      }

      label {
        display: block;
        font-weight: bold;
        font-size: 13px;
        margin-bottom: 3px;
      }

      input,
      textarea {
        width: 100%;
        border: 1px solid #bbb;
        border-radius: 4px;
        padding: 6px;
        font-size: 14px;
        background: #fff;
      }

      textarea {
        min-height: 70px;
      }

      /* === Upload d’image === */
      .file-drop {
        display: block;
        border: 1px dashed #aaa;
        border-radius: 4px;
        padding: 10px;
        text-align: center;
        color: #666;
        font-size: 13px;
      }

      .file-drop input {
        display: none;
      }

      /* === Aperçu image === */
      .preview-card {
        border: 1px solid #ccc;
        border-radius: 4px;
        background: #f9f9f9;
        padding: 6px;
        margin-top: 5px;
      }

      .preview-card img {
        width: 100%;
        height: auto;
        margin-top: 5px;
        border-radius: 4px;
      }

      .link-button {
        background: none;
        border: none;
        color: #0078ff;
        text-decoration: underline;
        font-size: 13px;
        cursor: pointer;
      }

      /* === Boutons === */
      .actions {
        margin-top: 10px;
        display: block;
      }

      button {
        display: block;
        width: 100%;
        border: none;
        border-radius: 4px;
        padding: 10px;
        font-size: 15px;
        cursor: pointer;
      }

      .primary {
        background: #0078ff;
        color: #fff;
        margin-bottom: 8px;
      }

      .secondary {
        background: #ddd;
        color: #222;
      }

      /* === Compatibilité extra === */
      @media handheld, screen and (max-width: 600px) {
        body {
          padding: 6px;
        }
        .conversation {
          max-height: 200px;
        }
      }
    </style>
  </head>
  <body>
    <main class="layout">
      <section class="conversation-panel">
        <header class="panel-header">
          <h1>Gemini Multimodal Studio</h1>
          <p>
            Chat with Gemini, keep per-user history, and explore multimodal prompts.
          </p>
          <div>
            <span class="badge">Preview</span>
            <span class="badge">Images OK</span>
          </div>
        </header>
        <div id="conversation" class="conversation" aria-live="polite"></div>
      </section>

      <section class="composer-panel">
        <form id="chat-form" class="composer" autocomplete="off">
          <div class="field-group">
            <label for="uid">User ID</label>
            <input
              id="uid"
              name="uid"
              type="text"
              placeholder="e.g. syntaxt0x1c"
              required
            />
          </div>

          <div class="field-group">
            <label for="ask">Message</label>
            <textarea
              id="ask"
              name="ask"
              placeholder="Ask Gemini something or type 'clear' to reset"
            ></textarea>
          </div>

          <div class="field-group">
            <label for="image-url">Image URL</label>
            <input
              id="image-url"
              name="image_url"
              type="url"
              placeholder="https://example.com/image.jpg"
            />
          </div>

          <div class="field-group">
            <label>Upload Image</label>
            <label class="file-drop">
              <input id="image-file" type="file" accept="image/*" />
              <span>Tap to upload image</span>
            </label>
          </div>

          <div class="preview-card" id="image-preview" hidden>
            <strong>Attached image</strong>
            <button type="button" id="clear-preview" class="link-button">Remove</button>
            <img id="preview-image" alt="Preview" />
            <small id="preview-meta"></small>
          </div>

          <div class="actions">
            <button type="button" class="primary" id="sendBtn" onclick="sendMessage()">Send to Gemini</button>
            <button type="button" id="clear-form" class="secondary">Reset</button>
          </div>
        </form>
      </section>
    </main>

    <script src="/max.js" type="module"></script>
  </body>
</html>