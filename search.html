<html>
<head>
<meta charset="utf-8">
<title>MaxSearch</title>
<style>
body {
  font-family: Arial, sans-serif;
  margin:0;
  background:#f2f2f2;
  text-align:center;
}
header {
  padding:20px;
  background:white;
  box-shadow:0 1px 5px rgba(0,0,0,0.1);
}
header h1 {
  font-family: 'Arial Black', sans-serif;
  color:#4285F4;
  margin:0;
}
#searchBar {
  margin:20px auto;
  display:flex;
  justify-content:center;
  max-width:600px;
}
#userInput {
  width:70%;
  padding:10px;
  font-size:16px;
  border-radius:20px 0 0 20px;
  border:1px solid #ccc;
  outline:none;
}
button {
  padding:10px 20px;
  font-size:16px;
  border:none;
  background:#4285F4;
  color:white;
  cursor:pointer;
  border-radius:0 20px 20px 0;
}
#tabs {
  margin-top:10px;
  display:flex;
  justify-content:center;
}
.tab {
  padding:8px 15px;
  cursor:pointer;
  margin:0 5px;
  border-bottom:2px solid transparent;
}
.tab.active {
  border-color:#4285F4;
  font-weight:bold;
}
#results {
  max-width:800px;
  margin:20px auto;
  text-align:left;
}
.result {
  margin-bottom:15px;
  background:white;
  padding:10px;
  border-radius:8px;
  box-shadow:0 1px 3px rgba(0,0,0,0.1);
}
.result a {
  text-decoration:none;
  color:#1a0dab;
  font-size:16px;
  font-weight:bold;
}
.result p {
  color:#4d5156;
  font-size:14px;
}
.result img {
  max-width:200px;
  display:block;
  margin-top:5px;
  border-radius:5px;
}
iframe.map {
  width:100%;
  height:300px;
  border:0;
  border-radius:8px;
}
</style>
</head>
<body>
<header>
  <h1>MaxSearch</h1>
</header>

<div id="searchBar">
  <input id="userInput" placeholder="Tape ta recherche...">
  <button onclick="search()">Recherche</button>
</div>

<div id="tabs">
  <div class="tab active" onclick="setTab('web')">Web</div>
  <div class="tab" onclick="setTab('images')">Images</div>
  <div class="tab" onclick="setTab('news')">Actualités</div>
  <div class="tab" onclick="setTab('videos')">Vidéos</div>
  <div class="tab" onclick="setTab('maps')">Maps</div>
</div>

<div id="results"></div>

<script>
var currentTab='web';

var apiKeyCS = "TA_CLE_API_GOOGLE"; // Google Custom Search API key
var cxWeb = "CX_WEB";   // Custom search engine ID Web
var cxImages = "CX_IMAGES"; // Custom search engine ID Images
var newsApiKey = "TA_NEWS_API_KEY"; // News API
var youtubeApiKey = "TA_YOUTUBE_API_KEY"; // YouTube API

function setTab(tab){
  currentTab=tab;
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  event.target.classList.add('active');
  document.getElementById('results').innerHTML='';
}

function search(){
  var q=document.getElementById('userInput').value.trim();
  if(!q) return;
  document.getElementById('results').innerHTML='<p>Chargement...</p>';

  if(currentTab=='web' || currentTab=='images'){
    var cx = currentTab=='web'? cxWeb : cxImages;
    fetch(`https://www.googleapis.com/customsearch/v1?key=${apiKeyCS}&cx=${cx}&q=${encodeURIComponent(q)}`)
    .then(res=>res.json())
    .then(r=>{
      displayResults(r.items || []);
    }).catch(e=>document.getElementById('results').innerHTML='Erreur');
  }
  else if(currentTab=='news'){
    fetch(`https://newsapi.org/v2/everything?q=${encodeURIComponent(q)}&apiKey=${newsApiKey}&pageSize=10`)
    .then(res=>res.json())
    .then(r=>displayResults(r.articles || []));
  }
  else if(currentTab=='videos'){
    fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(q)}&type=video&key=${youtubeApiKey}&maxResults=10`)
    .then(res=>res.json())
    .then(r=>{
      var items = r.items.map(i=>({title:i.snippet.title, link:"https://www.youtube.com/watch?v="+i.id.videoId, snippet:i.snippet.description, img:i.snippet.thumbnails.medium.url}));
      displayResults(items);
    });
  }
  else if(currentTab=='maps'){
    document.getElementById('results').innerHTML=`<iframe class="map" src="https://www.google.com/maps/embed/v1/search?key=${apiKeyCS}&q=${encodeURIComponent(q)}"></iframe>`;
  }
}

function displayResults(items){
  var html='';
  items.forEach(i=>{
    html+='<div class="result">';
    html+='<a href="'+i.link+'" target="_blank">'+i.title+'</a>';
    if(i.snippet) html+='<p>'+i.snippet+'</p>';
    if(i.img) html+='<img src="'+i.img+'">';
    html+='</div>';
  });
  document.getElementById('results').innerHTML=html;
}
</script>
</body>
</html>